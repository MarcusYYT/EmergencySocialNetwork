doctype html
head
  meta(charset='utf-8')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css', rel='stylesheet', integrity='sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3', crossorigin='anonymous')
  link(rel='stylesheet', type='text/css', href='/stylesheets/index.css')
  title Sign Up
.LoginBox
  form.login-form(action='/users/register' method='post')
    h2 Sign Up
    input(type='text' name='username' placeholder='Username')
    input(type='password' name='password' placeholder='Password')
    input(type='password' name='confirmPassword' placeholder='Confirm password')
    button#btn.btn.btn-primary(type='submit') Sign Up
    a(href='/') Back
  script.
    const form = document.querySelector('form'); 
    form.addEventListener('submit', function(event) { 
      let pwd = document.querySelector("input[name='password']");
      let conPwd = document.querySelector("input[name='confirmPassword']");
      let username = document.querySelector("input[name='username']");
      let btn = document.getElementById('btn');
      username = String(username.value.trim()).toLowerCase()
      if(username.length < 3){
      alert("The username must be at least 3 characters long");
      event.preventDefault();
      } 
      console.log("Password Entered: " + pwd.value.trim());
      if(pwd.value.trim().length < 4){
      alert("the password has to be at least 4 characters long");
      event.preventDefault(); 
      }
      if(pwd.value.trim() != conPwd.value.trim()){
      alert("The password is not match")
      event.preventDefault(); 
      }
      if (pwd.value == "" || username.value == ""){
      alert("Any input filed cannot be empty")
      event.preventDefault(); 
      }
    }); 

    if (new URL(window.location.href).searchParams.get('success') === 'false') {
        alert('Registration failed due to duplicate username');
    }
    if (new URL(window.location.href).searchParams.get('usernameValid') === 'false') {
        alert('Registration failed invalid username, try use another');
    }
  
    